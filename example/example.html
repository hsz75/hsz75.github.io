<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <title>播放视频</title>
    <style>
        .loading {
            width: 100%;
            height: 100%;
            background-color: white;
        }

        body {
            margin: auto;
            width: 80%;
        }
    </style>
</head>
<body>
<div id="tips" style="height:100%;width:100%;display: inline;"><h1>加载中</h1></div>
<center style="display:none;" id="body">
    <h1 style="font-size:125%">播放视频</h1>
    <audio src="audio.mp3" id="bgm"></audio>
    <video src="final.mp4" id="video" controls></video>
    <br>
    <p style="color:red;font-size:125%"><b>注：如果音画不同步请点击“音画同步按钮”</b></p>
    <!--<button href="#" id="click">播放</button>-->
    <button href="#" id="syncButton">音画同步</button>
</center>
<script type="text/javascript">
    //var click = document.getElementById("click");
    var syncButton = document.getElementById("syncButton");
    var bgm = document.getElementById("bgm");
    var video = document.getElementById("video");
    var secvideo;
    // 函数定义在这里
    function play() {
        if (click.innerHTML == "暂停") {
            bgm.pause();
            video.pause();
            click.innerHTML = "播放";
        } else {
            var currentTime = video.currentTime;
            bgm.currentTime = currentTime;
            video.play();
            bgm.play();
            click.innerHTML = "暂停";
        }
    }

    function syncAudioVideo() {
        var currentTime = video.currentTime;
                    bgm.currentTime = currentTime;
    }

    // 在此处添加事件监听
    //click.addEventListener('click', play);
    //video.addEventListener('click', function(){video.pause();aduio.pause()});
    syncButton.addEventListener('click',syncAudioVideo);
    //视频暂停
    video.addEventListener('pause', function() {
            bgm.pause();
        });
        //视频播放
        video.addEventListener("play", function() {
            bgm.play();
        });
        //视频进度更新
        video.addEventListener('timeupdate', function() {
            var currentTime = video.currentTime;
            //console.log(video.currentTime);
            //console.log("比较:",currentTime-secvideo);
           
            
        })

    window.onload = function () {
        document.getElementById("tips").style.display = "none";
        document.getElementById("body").style.display = "inline";
    };

    //检测
    
    // 定义函数来处理时间更新
    function handleTimeUpdate() {
      var secVideo = video.currentTime;
      //console.log("上一秒：" + secVideo);
    }
    
    // 使用 setInterval 调用处理函数，每秒执行一次
    setInterval(handleTimeUpdate, 1000);
</script>
</body>
</html>
